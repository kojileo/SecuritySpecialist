# VA入門

## VAとは

VA（Vulnerability Assessment：脆弱性評価）は、**システムやネットワークのセキュリティ上の弱点を発見・評価するプロセス**です。攻撃者が悪用する可能性のある脆弱性を事前に特定し、適切な対策を講じることで、セキュリティリスクを軽減します。

## VAの基本概念

### 脆弱性とは

**脆弱性（Vulnerability）**とは、システムの設計や実装における欠陥で、攻撃者に悪用される可能性のあるセキュリティ上の弱点です。

#### 脆弱性の種類

| 種類 | 説明 | 例 |
|------|------|-----|
| **ソフトウェア脆弱性** | アプリケーションの欠陥 | バッファオーバーフロー、SQLインジェクション |
| **設定脆弱性** | 不適切な設定 | デフォルトパスワード、不要なサービス |
| **ネットワーク脆弱性** | ネットワーク設計の欠陥 | 暗号化されていない通信、不適切なファイアウォール設定 |
| **物理的脆弱性** | 物理的なセキュリティの欠陥 | サーバールームの施錠不備 |

### VAの目的

1. **リスクの特定**: 潜在的なセキュリティリスクの発見
2. **優先度の決定**: 緊急度と重要度に基づく対策の優先順位付け
3. **対策の立案**: 効果的なセキュリティ対策の策定
4. **継続的改善**: 定期的な評価によるセキュリティレベルの向上

## VAの実施手順

### 1. 準備段階

#### スコープの決定
```
対象システム: Webサーバー、データベース、ネットワーク機器
対象範囲: 内部ネットワーク、外部公開システム
実施期間: 1週間、1ヶ月など
```

#### チームの編成
- **VAエンジニア**: 脆弱性スキャンの実施
- **システム管理者**: 対象システムの管理
- **セキュリティ担当者**: 結果の分析と対策立案

### 2. 情報収集

#### ネットワーク情報の収集
- **IPアドレス範囲**: スキャン対象の特定
- **ポート情報**: 開放ポートの確認
- **サービス情報**: 稼働中のサービスの特定
- **OS情報**: オペレーティングシステムの特定

#### ツールの選択

| ツール | 用途 | 特徴 |
|--------|------|------|
| **Nmap** | ポートスキャン、OS検出 | 無料、高機能 |
| **Nessus** | 脆弱性スキャン | 商用、包括的 |
| **OpenVAS** | 脆弱性スキャン | 無料、オープンソース |
| **Qualys** | クラウドベーススキャン | 管理不要、包括的 |

### 3. 脆弱性スキャン

#### 自動スキャン
```
対象: 大量のシステム、既知の脆弱性
方法: ツールによる自動スキャン
利点: 効率的、網羅的
```

#### 手動テスト
```
対象: 重要なシステム、複雑な脆弱性
方法: 専門家による詳細な調査
利点: 深い分析、カスタム脆弱性の発見
```

### 4. 結果の分析

#### 脆弱性の分類

| 重要度 | CVSSスコア | 説明 | 対応期限 |
|--------|------------|------|----------|
| **Critical** | 9.0-10.0 | 即座に修正が必要 | 24時間以内 |
| **High** | 7.0-8.9 | 早急な修正が必要 | 1週間以内 |
| **Medium** | 4.0-6.9 | 計画的な修正が必要 | 1ヶ月以内 |
| **Low** | 0.1-3.9 | 可能な範囲で修正 | 3ヶ月以内 |

#### リスク評価

```
リスク = 脆弱性の重要度 × 影響範囲 × 攻撃の容易さ
```

## VAの種類

### 1. 外部VA

#### 特徴
- **外部からの視点**: インターネット経由での攻撃を想定
- **公開システム**: Webサーバー、メールサーバーなど
- **攻撃者の視点**: 実際の攻撃者と同じ視点

#### 対象システム
- 企業のWebサイト
- 公開API
- リモートアクセスシステム
- クラウドサービス

### 2. 内部VA

#### 特徴
- **内部からの視点**: 社内ネットワークからの攻撃を想定
- **内部システム**: 社内サーバー、データベースなど
- **内部脅威**: 内部犯による攻撃を想定

#### 対象システム
- 社内サーバー
- データベース
- 内部アプリケーション
- ネットワーク機器

### 3. 認証付きVA

#### 特徴
- **認証されたスキャン**: システムにログインしてスキャン
- **詳細な分析**: より深い脆弱性の発見
- **設定確認**: システム設定の詳細な確認

#### 実施方法
- 管理者権限でのスキャン
- アプリケーションレベルのテスト
- データベースの脆弱性確認

## 脆弱性の種類と対策

### 1. ソフトウェア脆弱性

#### 代表的な脆弱性

| 脆弱性 | 説明 | 対策 |
|--------|------|------|
| **SQLインジェクション** | データベースへの不正なクエリ実行 | パラメータ化クエリの使用 |
| **クロスサイトスクリプティング** | 悪意のあるスクリプトの実行 | 入力値の検証・エスケープ |
| **バッファオーバーフロー** | メモリ領域の不正な書き込み | 境界チェックの実装 |
| **ディレクトリトラバーサル** | 不正なファイルアクセス | パス検証の強化 |

### 2. 設定脆弱性

#### よくある設定ミス

| 設定項目 | 問題 | 対策 |
|----------|------|------|
| **デフォルトパスワード** | 初期設定のまま使用 | 強固なパスワードに変更 |
| **不要なサービス** | 使用していないサービスの稼働 | 不要なサービスの停止 |
| **暗号化の不備** | 平文での通信 | 暗号化の実装 |
| **権限の過大** | 必要以上の権限付与 | 最小権限の原則 |

### 3. ネットワーク脆弱性

#### ネットワークレベルの問題

| 問題 | 説明 | 対策 |
|------|------|-----|
| **暗号化されていない通信** | 平文でのデータ送信 | TLS/SSLの実装 |
| **不適切なファイアウォール設定** | 不要なポートの開放 | 適切なルール設定 |
| **セグメンテーションの不備** | ネットワークの分離不足 | 適切なセグメンテーション |
| **古いプロトコル** | セキュリティが不十分なプロトコル | 安全なプロトコルへの移行 |

## VAレポートの作成

### レポートの構成

#### 1. エグゼクティブサマリー
- 発見された脆弱性の概要
- リスクレベルの分布
- 推奨される対策の優先順位

#### 2. 技術的詳細
- 脆弱性の詳細な説明
- 影響範囲と攻撃シナリオ
- 修正方法の具体的な手順

#### 3. 対策計画
- 修正の優先順位
- 実施スケジュール
- 責任者の割り当て

### レポートの例

```
【Critical】SQLインジェクション脆弱性
- 影響: データベースの完全な制御が可能
- 対象: /login.php
- 対策: パラメータ化クエリの実装
- 期限: 24時間以内

【High】デフォルトパスワード
- 影響: 管理者権限での不正アクセス
- 対象: ルーター管理画面
- 対策: 強固なパスワードへの変更
- 期限: 1週間以内
```

## 継続的なVA

### 定期実施の重要性

- **新たな脆弱性の発見**: 定期的なスキャンによる新規脆弱性の発見
- **設定変更の影響**: システム変更による新たな脆弱性の発生
- **脅威の変化**: 新しい攻撃手法への対応

### 実施頻度

| システム | 実施頻度 | 理由 |
|----------|----------|------|
| **外部公開システム** | 月1回 | 高いリスク、頻繁な攻撃 |
| **内部重要システム** | 四半期1回 | 中程度のリスク |
| **一般システム** | 半年1回 | 定期的な確認 |

## まとめ

VAは**セキュリティリスクの事前発見と対策**のための重要なプロセスです。定期的な脆弱性評価により、攻撃者に先んじてセキュリティ上の問題を発見し、適切な対策を講じることができます。

効果的なVAの実施には、適切なツールの選択、専門知識の活用、継続的な実施が重要です。セキュリティは一度の対策で完了するものではなく、継続的な改善が必要です。

---

*この資料はネットワークセキュリティの基礎学習用です。実際の設定や運用では、詳細な技術仕様書を参照してください。*
