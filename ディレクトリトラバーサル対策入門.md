# ディレクトリトラバーサル対策入門

## 概要
ディレクトリトラバーサル対策は、攻撃者が`../`などのパス操作文字列を使用して、意図しないディレクトリやファイルにアクセスする攻撃を防ぐセキュリティ対策です。

## 攻撃手法
- **パス操作**: `../`や`..\`で上位ディレクトリに移動
- **絶対パス指定**: `/etc/passwd`などシステムファイルへの直接アクセス
- **エンコーディング**: URLエンコードやUnicodeエスケープで回避

## 主な対策
1. **パス検証**: 入力されたパスが許可範囲内かチェック
2. **ベースディレクトリ固定**: アクセス可能なディレクトリを制限
3. **ファイル名正規化**: パスを正規化してから検証

## 実装方法
- **ホワイトリスト方式**: 許可されたファイルのみアクセス可能
- **パスサニタイゼーション**: 危険な文字列を除去・置換
- **chroot環境**: ファイルシステムのルートを制限

## 検出・防止
- **入力検証**: ファイルパス入力の厳格な検証
- **ログ監視**: 異常なファイルアクセスを検出
- **WAF設定**: Webアプリケーションファイアウォールでブロック

## ベストプラクティス
- 相対パスの使用禁止
- ファイルアクセス権限の最小化
- 定期的なセキュリティテスト実施
